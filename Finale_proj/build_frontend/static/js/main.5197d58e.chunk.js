(this["webpackJsonpreact-shop"]=this["webpackJsonpreact-shop"]||[]).push([[0],{30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){},50:function(e,t,r){},51:function(e,t,r){},52:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(24),s=r.n(a),i=(r(30),r(10)),o=r(11),l=r(13),d=r(12),j=r(5),u=r(2),h=(r(31),r(32),r(0));var b=function(e){return Object(h.jsxs)("nav",{className:"app-nav",children:[Object(h.jsxs)("ul",{className:"nav__list",children:[Object(h.jsx)("li",{className:"nav__item",children:Object(h.jsx)(u.c,{className:"nav__link",to:"/",exact:!0,children:Object(h.jsx)("img",{className:"logo",src:"http://localhost:8085/images/logo.png",alt:"logo",width:"50"})})}),Object(h.jsx)("li",{className:"nav__item",children:Object(h.jsx)(u.c,{className:"nav__link",activeClassName:"nav__link--active",to:"/",exact:!0,children:"Main"})}),e.isAuth?null:Object(h.jsx)("li",{className:"nav__item",children:Object(h.jsx)(u.c,{className:"nav__link",activeClassName:"nav__link--active",to:"/login",children:"Login"})}),e.isAuth?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("li",{className:"nav__item",children:Object(h.jsx)(u.c,{className:"nav__link",activeClassName:"nav__link--active",to:"/user",children:"User info"})})}):null,Object(h.jsx)("li",{className:"nav__iteme",children:Object(h.jsx)(u.c,{className:"nav__link",activeClassName:"nav__link--active",to:"/about",children:"About Us"})}),Object(h.jsx)("li",{className:"nav__item",children:Object(h.jsx)(u.c,{className:"nav__link",activeClassName:"nav__link--active",to:"/cart",children:Object(h.jsx)("img",{src:"http://localhost:8085/images/shopping-cart.svg",width:"30",alt:"cart"})})})]}),Object(h.jsx)("hr",{})]})},m=(r(39),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(i.a)(this,r);for(var c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={types:[]},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:8085/t-shop/types").then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(t){e.setState({types:t.types})})).catch((function(e){return console.log("err",e)}))}},{key:"render",value:function(){var e=this.state.types.map((function(e){return Object(h.jsx)("li",{className:"type__item",children:Object(h.jsx)(u.b,{to:"/products?type="+e.name,children:Object(h.jsxs)("div",{className:"type-wrapper",children:[Object(h.jsx)("img",{src:"".concat(e.image),alt:"type preview"}),e.name]})})},e.type_id)}));return Object(h.jsx)("main",{className:"wrapper",children:Object(h.jsx)("ul",{className:"types__list",children:e})})}}]),r}(c.Component));r(40);var p=function(){return Object(h.jsxs)("main",{className:"about-wrapper",children:[Object(h.jsx)("h1",{children:"About Us page"}),Object(h.jsx)("p",{children:"We are a young company that sells T-shirts."})]})},O=r(14),f=r(3),x=r(17),g=function(e){return""!==e.trim()},v=function(e){return function(t){var r=!0;return e.min&&(r=r&&t.trim().length>=e.min),e.max&&(r=r&&t.trim().length<=e.max),r}},_=function(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)},y=(r(41),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(i.a)(this,r);for(var c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={loginForm:{email:{value:"",valid:!1,touched:!1,validators:[g,_]},password:{value:"",valid:!1,touched:!1,validators:[g,v({min:6})]}},isFormValid:!1},e.inputChangeHandler=function(t,r){var c=r.target.value;e.setState((function(e){var r,n=!0,a=Object(x.a)(e.loginForm[t].validators);try{for(a.s();!(r=a.n()).done;){var s=r.value;n=n&&s(c)}}catch(d){a.e(d)}finally{a.f()}var i=Object(f.a)(Object(f.a)({},e.loginForm),{},Object(O.a)({},t,Object(f.a)(Object(f.a)({},e.loginForm[t]),{},{valid:n,value:c}))),o=!0;for(var l in i)o=o&&i[l].valid;return{loginForm:i,isFormValid:o}}))},e.inputBlurHandler=function(t){e.setState((function(e){return{loginForm:Object(f.a)(Object(f.a)({},e.loginForm),{},Object(O.a)({},t,Object(f.a)(Object(f.a)({},e.loginForm[t]),{},{touched:!0})))}}))},e}return Object(o.a)(r,[{key:"render",value:function(){var e=this,t=this.state.loginForm;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{className:"form__header",children:"SignIn form"}),Object(h.jsxs)("form",{className:"form--login",onSubmit:function(t){return e.props.onLogin(t,{email:e.state.loginForm.email.value,password:e.state.loginForm.password.value})},children:[Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{id:"email",type:"email",className:"form__input",onChange:this.inputChangeHandler.bind(this,"email"),onBlur:this.inputBlurHandler.bind(this,"email")}),t.email.touched&&!t.email.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid email!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(h.jsx)("input",{id:"password",type:"password",className:"form__input",onChange:this.inputChangeHandler.bind(this,"password"),onBlur:this.inputBlurHandler.bind(this,"password")}),t.password.touched&&!t.password.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid password!"}):null]}),Object(h.jsx)("button",{className:"btn--auth",type:"submit",disabled:!0===this.state.isFormValid?"":"disabled",children:"Login"})]}),Object(h.jsxs)("p",{className:"register-info",children:["If you don't have an account you can",Object(h.jsx)(u.b,{to:"/register",children:" Register"})]})]})}}]),r}(c.Component)),N=(r(42),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var c;return Object(i.a)(this,r),(c=t.call(this,e)).state={registerForm:{name:{value:"",valid:!1,touched:!1,validators:[g]},surname:{value:"",valid:!1,touched:!1,validators:[g]},email:{value:"",valid:!1,touched:!1,validators:[g,_]},password:{value:"",valid:!1,touched:!1,validators:[g,v({min:6})]},country:{value:"",valid:!1,touched:!1,validators:[g]},city:{value:"",valid:!1,touched:!1,validators:[g]},address:{value:"",valid:!1,touched:!1,validators:[g]}},isFormValid:!1,isRegistered:!1},c.inputChangeHandler=function(e,t){var r=t.target.value;c.setState((function(t){var c,n=!0,a=Object(x.a)(t.registerForm[e].validators);try{for(a.s();!(c=a.n()).done;){var s=c.value;n=n&&s(r)}}catch(j){a.e(j)}finally{a.f()}var i=Object(f.a)(Object(f.a)({},t.registerForm),{},Object(O.a)({},e,Object(f.a)(Object(f.a)({},t.registerForm[e]),{},{valid:n,value:r}))),o=!0;for(var l in i){var d;if("isFormValid"!==l)o=o&&(null===(d=i[l])||void 0===d?void 0:d.valid)}return{registerForm:i,isFormValid:o}}))},c.inputBlurHandler=function(e){c.setState((function(t){return{registerForm:Object(f.a)(Object(f.a)({},t.registerForm),{},Object(O.a)({},e,Object(f.a)(Object(f.a)({},t.registerForm[e]),{},{touched:!0})))}}))},console.log(e),c}return Object(o.a)(r,[{key:"render",value:function(){var e=this,t=this.state.registerForm;return this.props.state.message&&(this.props.state.message="",this.props.history.push("/login")),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{className:"form__header",children:"SignUp form"}),Object(h.jsxs)("form",{className:"form--register",onSubmit:function(r){return e.props.onRegister(r,{name:t.name.value,surname:t.surname.value,email:t.email.value,password:t.password.value,country:t.country.value,city:t.city.value,address:t.address.value})},children:[Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"name",children:"*Name:"}),Object(h.jsx)("input",{id:"name",type:"text",className:"form__input",onChange:this.inputChangeHandler.bind(this,"name"),onBlur:this.inputBlurHandler.bind(this,"name"),placeholder:"John"}),t.name.touched&&!t.name.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid name!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"surname",children:"*Surname:"}),Object(h.jsx)("input",{id:"surname",type:"text",className:"form__input",onChange:this.inputChangeHandler.bind(this,"surname"),onBlur:this.inputBlurHandler.bind(this,"surname"),placeholder:"Donavan"}),t.surname.touched&&!t.surname.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid surname!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"email",children:"*Email:"}),Object(h.jsx)("input",{id:"email",type:"email",className:"form__input",onChange:this.inputChangeHandler.bind(this,"email"),onBlur:this.inputBlurHandler.bind(this,"email"),placeholder:"example@mail.com"}),t.email.touched&&!t.email.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid email!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"password",children:"*Password:"}),Object(h.jsx)("input",{id:"password",type:"password",className:"form__input",onChange:this.inputChangeHandler.bind(this,"password"),onBlur:this.inputBlurHandler.bind(this,"password"),placeholder:"at least 6 characters"}),t.password.touched&&!t.password.valid?Object(h.jsx)("span",{className:"form__error",children:"Password must be at least 6 char!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"country",children:"*Country:"}),Object(h.jsx)("input",{id:"country",type:"text",className:"form__input",onChange:this.inputChangeHandler.bind(this,"country"),onBlur:this.inputBlurHandler.bind(this,"country"),placeholder:"Ukraine"}),t.country.touched&&!t.country.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid country!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"city",children:"*City:"}),Object(h.jsx)("input",{id:"city",type:"text",className:"form__input",onChange:this.inputChangeHandler.bind(this,"city"),onBlur:this.inputBlurHandler.bind(this,"city"),placeholder:"Odessa"}),t.city.touched&&!t.city.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid city!"}):null]}),Object(h.jsxs)("div",{className:"form__group",children:[Object(h.jsx)("label",{htmlFor:"address",children:"*Address:"}),Object(h.jsx)("input",{id:"address",type:"text",className:"form__input",onChange:this.inputChangeHandler.bind(this,"address"),onBlur:this.inputBlurHandler.bind(this,"address"),placeholder:"str. Staroportofrankovskaya, 32"}),t.address.touched&&!t.address.valid?Object(h.jsx)("span",{className:"form__error",children:"Enter valid address!"}):null]}),Object(h.jsx)("button",{type:"submit",className:"btn--auth",disabled:!0===this.state.isFormValid?"":"disabled",onClick:this.isRegistered,children:"Register"})]})]})}}]),r}(c.Component)),w=Object(j.g)(N);r(43);function S(e){return Object(h.jsxs)("div",{className:"product",children:[Object(h.jsx)("img",{className:"product__print",src:"".concat(e.data.img),alt:"print"}),Object(h.jsx)("svg",{className:"product__img",version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"1063.000000pt",height:"1280.000000pt",viewBox:"0 0 1063.000000 1280.000000",preserveAspectRatio:"xMidYMid meet",children:Object(h.jsx)("g",{transform:"translate(0.000000,1280.000000) scale(0.100000,-0.100000)",fill:"".concat(e.data.color),stroke:"none",children:Object(h.jsx)("path",{d:"M6662 12635 c-153 -78 -384 -139 -592 -156 -63 -5 -147 -13 -186 -19\r\n-88 -12 -549 -29 -784 -29 -104 0 -214 6 -270 15 -52 8 -160 19 -240 24 -146\r\n9 -429 53 -573 90 l-78 19 -90 -39 c-49 -22 -123 -49 -163 -59 -53 -14 -92\r\n-33 -142 -69 -38 -27 -92 -57 -121 -66 -28 -10 -147 -67 -265 -128 -117 -61\r\n-316 -161 -443 -223 -209 -102 -260 -132 -554 -331 -457 -310 -690 -497 -879\r\n-708 -127 -141 -144 -173 -207 -386 -43 -146 -136 -466 -225 -770 -96 -331\r\n-223 -769 -270 -930 -27 -91 -68 -235 -93 -320 -25 -85 -80 -290 -122 -455\r\n-67 -264 -83 -313 -131 -411 -43 -88 -56 -124 -61 -178 -4 -49 -14 -79 -35\r\n-113 -26 -41 -28 -49 -17 -70 7 -12 20 -23 29 -23 13 0 308 -111 585 -219 28\r\n-11 185 -70 350 -132 354 -132 617 -213 885 -275 107 -24 202 -46 210 -49 9\r\n-3 35 9 58 26 38 28 42 35 42 75 0 37 12 65 66 159 37 63 71 115 75 115 5 0\r\n10 -12 10 -27 1 -16 2 -39 3 -53 1 -14 3 -42 4 -63 2 -32 5 -37 21 -32 16 5\r\n19 -3 25 -72 4 -43 32 -253 61 -466 l55 -388 -25 -170 c-15 -102 -42 -230 -69\r\n-326 -41 -143 -45 -172 -51 -308 -7 -148 -23 -247 -79 -493 -40 -170 -77 -636\r\n-64 -798 l9 -121 -94 -209 c-52 -115 -127 -303 -167 -419 l-72 -210 -20 -240\r\nc-16 -209 -19 -332 -17 -955 1 -713 1 -715 -23 -860 -21 -123 -27 -145 -41\r\n-142 -39 7 -12 -47 113 -220 72 -102 114 -151 137 -162 58 -28 189 -36 778\r\n-49 727 -15 1686 -11 1960 8 110 8 306 22 435 30 603 40 812 59 1170 105 545\r\n69 690 87 990 120 175 19 355 47 525 80 143 28 316 62 385 75 166 32 305 75\r\n320 98 9 15 8 24 -5 44 -22 32 -55 130 -55 159 0 13 -13 38 -30 57 -22 25 -34\r\n57 -51 128 -11 52 -25 103 -30 114 -15 32 -39 156 -39 202 0 23 -5 54 -10 69\r\n-6 14 -22 99 -35 188 -14 88 -29 175 -33 191 -5 17 -17 86 -26 155 -10 69 -22\r\n135 -27 148 -5 13 -14 67 -19 120 -6 53 -19 147 -29 207 -11 61 -27 155 -37\r\n210 -10 54 -23 111 -31 125 -7 14 -13 30 -13 37 0 6 -11 24 -24 40 -13 15 -35\r\n52 -50 81 -26 51 -27 59 -21 150 11 176 8 316 -9 412 -9 52 -20 142 -26 200\r\n-5 58 -16 141 -24 185 -9 44 -20 143 -26 220 -6 77 -18 181 -27 230 -21 109\r\n-24 502 -5 690 25 261 36 462 52 955 6 173 15 407 20 520 6 112 10 316 10 452\r\n0 216 2 248 15 248 9 0 19 -10 24 -22 5 -13 25 -58 45 -100 20 -42 36 -84 36\r\n-93 0 -31 41 -178 60 -216 34 -66 43 -69 241 -69 l176 0 224 69 c161 49 263\r\n88 364 136 197 95 301 144 525 247 107 49 202 95 210 102 17 14 101 64 140 83\r\n107 53 226 132 243 161 19 33 19 33 -7 125 -14 51 -26 107 -26 123 0 20 -12\r\n47 -34 75 -23 30 -40 69 -54 124 -11 44 -25 92 -30 106 -6 14 -18 57 -27 95\r\n-9 38 -20 78 -25 89 -9 19 -32 99 -84 290 -11 44 -24 85 -28 90 -3 6 -16 49\r\n-28 95 -11 47 -27 101 -34 120 -8 19 -21 67 -31 105 -9 39 -20 79 -25 90 -5\r\n11 -17 49 -25 85 -9 36 -24 90 -34 120 -33 98 -64 204 -78 265 -7 33 -17 69\r\n-23 80 -5 11 -20 63 -34 115 -34 133 -65 241 -76 265 -5 11 -19 63 -31 115\r\n-12 52 -26 100 -30 106 -5 6 -15 44 -24 84 -9 40 -20 79 -26 87 -7 7 -8 13 -4\r\n13 4 0 2 6 -4 14 -6 7 -16 62 -22 122 -11 104 -49 230 -84 274 -6 8 -25 37\r\n-41 64 -16 27 -38 64 -49 82 -79 131 -262 344 -295 344 -6 0 -36 20 -67 43\r\n-32 24 -71 51 -88 59 -16 9 -122 63 -235 121 -270 138 -385 200 -725 392 -78\r\n44 -212 118 -275 153 -30 16 -95 53 -144 81 -49 28 -93 51 -99 51 -6 0 -18 6\r\n-26 14 -9 8 -79 48 -156 90 -110 59 -154 89 -205 141 -35 36 -71 65 -80 65\r\n-36 1 -94 31 -163 84 -40 31 -75 56 -78 55 -2 0 -41 -20 -87 -44z"})})}),Object(h.jsx)(u.b,{to:"/product/"+e.data.id,children:Object(h.jsx)("h3",{className:"product__title",children:e.data.name})}),Object(h.jsxs)("b",{className:"product__price",children:[e.data.price,"UAH"]})]})}var F=r(4);r(44);var k=Object(j.g)((function(e){var t=Object(c.useState)([]),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(null),o=Object(F.a)(i,2),l=o[0],d=o[1],j=Object(c.useRef)(l),b=Object(c.useState)(null),m=Object(F.a)(b,2),p=m[0],O=m[1],f=Object(c.useRef)(p);return Object(c.useEffect)((function(){fetch("http://localhost:8085/t-shop/categories").then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.categories)})).catch((function(e){return console.log("err",e)}))}),[]),Object(c.useEffect)((function(){d(j.current=e.location.search.split("=")[1])}),[e.location.search]),Object(c.useEffect)((function(){O(f.current=e.match.params.category)}),[e.match.params]),Object(h.jsxs)("div",{className:"categories-wrapper",children:[Object(h.jsx)("b",{className:"categories__title",children:"Categories:"}),Object(h.jsx)("ul",{className:"categories__list",children:n.map((function(e){return Object(h.jsx)(u.b,{to:"/products/".concat(e.name,"?type=").concat(l),className:"categories__link ",children:Object(h.jsx)("li",{className:"categories__item  ".concat(p===e.name?"categories__item--active":""),children:e.name})},e.id)}))})]})})),C=(r(45),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var c;return Object(i.a)(this,r),(c=t.call(this,e)).state={type:"",category:null,products:[]},c}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.location.search.split("=")[1];this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{type:e})})),this.fetchProductsData(e)}},{key:"componentDidUpdate",value:function(){this.updateState()}},{key:"updateState",value:function(){var e=this.props.location.search.split("=")[1],t=this.props.match.params.category;this.props.location.search.split("=")[1]!==this.state.type&&(this.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{type:e})})),this.fetchProductsData(e)),this.props.match.params.category!==this.state.category&&(this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{category:t})})),this.fetchProductsData(e,t))}},{key:"fetchProductsData",value:function(e,t){var r,c=this;r=void 0===t?"http://localhost:8085/t-shop/products?type=".concat(e):"http://localhost:8085/t-shop/products/".concat(t,"?type=").concat(e),fetch(r).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){c.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{products:e.products})}))})).catch((function(e){return console.log("err",e)}))}},{key:"render",value:function(){var e,t=this.state.products.map((function(e){return Object(h.jsx)(S,{data:e},e.id)}));return e=t.length?t:Object(h.jsx)("p",{className:"products-info",children:"There is no products yet here!"}),Object(h.jsxs)("main",{className:"wrapper",children:[Object(h.jsx)(k,{}),Object(h.jsxs)("div",{className:"products-wrapper",children:[" ",e]})]})}}]),r}(c.Component)),I=Object(j.g)(C);r(46);var E=Object(j.g)((function(e){var t=Object(c.useState)({}),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(e.match.params.id),o=Object(F.a)(i,2),l=o[0],d=o[1],j=Object(c.useRef)(l),u=Object(c.useState)(""),b=Object(F.a)(u,2),m=b[0],p=b[1],O=Object(c.useRef)(m),f=localStorage.getItem("userId");function x(){p(O.current="")}return Object(c.useEffect)((function(){fetch("http://localhost:8085/t-shop/product/".concat(l)).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.product[0])})).catch((function(e){return console.log("err",e)}))}),[l]),Object(c.useEffect)((function(){d(j.current=e.match.params.id)}),[e.match.params.id]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"preview-wrapper",children:[Object(h.jsxs)("div",{className:"preview__image",children:[Object(h.jsx)("img",{className:"preview__print",src:"".concat(n.img),alt:"print"}),Object(h.jsx)("svg",{className:"product__img",version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"1063.000000pt",height:"1280.000000pt",viewBox:"0 0 1063.000000 1280.000000",preserveAspectRatio:"xMidYMid meet",children:Object(h.jsx)("g",{transform:"translate(0.000000,1280.000000) scale(0.100000,-0.100000)",fill:"".concat(n.color),stroke:"none",children:Object(h.jsx)("path",{d:"M6662 12635 c-153 -78 -384 -139 -592 -156 -63 -5 -147 -13 -186 -19\r\n-88 -12 -549 -29 -784 -29 -104 0 -214 6 -270 15 -52 8 -160 19 -240 24 -146\r\n9 -429 53 -573 90 l-78 19 -90 -39 c-49 -22 -123 -49 -163 -59 -53 -14 -92\r\n-33 -142 -69 -38 -27 -92 -57 -121 -66 -28 -10 -147 -67 -265 -128 -117 -61\r\n-316 -161 -443 -223 -209 -102 -260 -132 -554 -331 -457 -310 -690 -497 -879\r\n-708 -127 -141 -144 -173 -207 -386 -43 -146 -136 -466 -225 -770 -96 -331\r\n-223 -769 -270 -930 -27 -91 -68 -235 -93 -320 -25 -85 -80 -290 -122 -455\r\n-67 -264 -83 -313 -131 -411 -43 -88 -56 -124 -61 -178 -4 -49 -14 -79 -35\r\n-113 -26 -41 -28 -49 -17 -70 7 -12 20 -23 29 -23 13 0 308 -111 585 -219 28\r\n-11 185 -70 350 -132 354 -132 617 -213 885 -275 107 -24 202 -46 210 -49 9\r\n-3 35 9 58 26 38 28 42 35 42 75 0 37 12 65 66 159 37 63 71 115 75 115 5 0\r\n10 -12 10 -27 1 -16 2 -39 3 -53 1 -14 3 -42 4 -63 2 -32 5 -37 21 -32 16 5\r\n19 -3 25 -72 4 -43 32 -253 61 -466 l55 -388 -25 -170 c-15 -102 -42 -230 -69\r\n-326 -41 -143 -45 -172 -51 -308 -7 -148 -23 -247 -79 -493 -40 -170 -77 -636\r\n-64 -798 l9 -121 -94 -209 c-52 -115 -127 -303 -167 -419 l-72 -210 -20 -240\r\nc-16 -209 -19 -332 -17 -955 1 -713 1 -715 -23 -860 -21 -123 -27 -145 -41\r\n-142 -39 7 -12 -47 113 -220 72 -102 114 -151 137 -162 58 -28 189 -36 778\r\n-49 727 -15 1686 -11 1960 8 110 8 306 22 435 30 603 40 812 59 1170 105 545\r\n69 690 87 990 120 175 19 355 47 525 80 143 28 316 62 385 75 166 32 305 75\r\n320 98 9 15 8 24 -5 44 -22 32 -55 130 -55 159 0 13 -13 38 -30 57 -22 25 -34\r\n57 -51 128 -11 52 -25 103 -30 114 -15 32 -39 156 -39 202 0 23 -5 54 -10 69\r\n-6 14 -22 99 -35 188 -14 88 -29 175 -33 191 -5 17 -17 86 -26 155 -10 69 -22\r\n135 -27 148 -5 13 -14 67 -19 120 -6 53 -19 147 -29 207 -11 61 -27 155 -37\r\n210 -10 54 -23 111 -31 125 -7 14 -13 30 -13 37 0 6 -11 24 -24 40 -13 15 -35\r\n52 -50 81 -26 51 -27 59 -21 150 11 176 8 316 -9 412 -9 52 -20 142 -26 200\r\n-5 58 -16 141 -24 185 -9 44 -20 143 -26 220 -6 77 -18 181 -27 230 -21 109\r\n-24 502 -5 690 25 261 36 462 52 955 6 173 15 407 20 520 6 112 10 316 10 452\r\n0 216 2 248 15 248 9 0 19 -10 24 -22 5 -13 25 -58 45 -100 20 -42 36 -84 36\r\n-93 0 -31 41 -178 60 -216 34 -66 43 -69 241 -69 l176 0 224 69 c161 49 263\r\n88 364 136 197 95 301 144 525 247 107 49 202 95 210 102 17 14 101 64 140 83\r\n107 53 226 132 243 161 19 33 19 33 -7 125 -14 51 -26 107 -26 123 0 20 -12\r\n47 -34 75 -23 30 -40 69 -54 124 -11 44 -25 92 -30 106 -6 14 -18 57 -27 95\r\n-9 38 -20 78 -25 89 -9 19 -32 99 -84 290 -11 44 -24 85 -28 90 -3 6 -16 49\r\n-28 95 -11 47 -27 101 -34 120 -8 19 -21 67 -31 105 -9 39 -20 79 -25 90 -5\r\n11 -17 49 -25 85 -9 36 -24 90 -34 120 -33 98 -64 204 -78 265 -7 33 -17 69\r\n-23 80 -5 11 -20 63 -34 115 -34 133 -65 241 -76 265 -5 11 -19 63 -31 115\r\n-12 52 -26 100 -30 106 -5 6 -15 44 -24 84 -9 40 -20 79 -26 87 -7 7 -8 13 -4\r\n13 4 0 2 6 -4 14 -6 7 -16 62 -22 122 -11 104 -49 230 -84 274 -6 8 -25 37\r\n-41 64 -16 27 -38 64 -49 82 -79 131 -262 344 -295 344 -6 0 -36 20 -67 43\r\n-32 24 -71 51 -88 59 -16 9 -122 63 -235 121 -270 138 -385 200 -725 392 -78\r\n44 -212 118 -275 153 -30 16 -95 53 -144 81 -49 28 -93 51 -99 51 -6 0 -18 6\r\n-26 14 -9 8 -79 48 -156 90 -110 59 -154 89 -205 141 -35 36 -71 65 -80 65\r\n-36 1 -94 31 -163 84 -40 31 -75 56 -78 55 -2 0 -41 -20 -87 -44z"})})})]}),Object(h.jsxs)("div",{className:"preview__info",children:[Object(h.jsx)("h3",{children:"Product Details:"}),Object(h.jsxs)("p",{children:["Name: ",Object(h.jsxs)("b",{children:['"',n.name,'"']})]}),Object(h.jsxs)("p",{children:["Type: ",n.type]}),Object(h.jsxs)("p",{children:["Size: ",n.size]}),Object(h.jsxs)("p",{children:["Material: ",n.material]}),Object(h.jsxs)("p",{children:["Color: ",n.color]}),Object(h.jsxs)("p",{children:["Available: ",n.available]}),Object(h.jsxs)("p",{children:["Price: ",n.price,"UAH"]}),Object(h.jsx)("button",{type:"button",className:"add-btn",onClick:function(){fetch("http://localhost:8085/t-shop/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:f,prodId:n.prodId,opId:n.opId,count:n.available})}).then((function(e){return e.json()})).then((function(e){p(O.current=e)})).catch((function(e){console.log("err",e)}))},disabled:!f,title:f?"Add product into cart":"You should login first",children:"Add to Cart"})]})]}),Object(h.jsx)("p",{className:"message",children:m.message?(setTimeout(x,2e3),m.message):null})]})}));function H(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Object(h.jsxs)(u.b,{to:"/user/order/".concat(e.item.id),children:["Order #",e.idx]})}),Object(h.jsx)("td",{children:e.item.status}),Object(h.jsx)("td",{children:e.item.payment}),Object(h.jsx)("td",{children:e.item.shipping}),Object(h.jsx)("td",{children:e.item.price}),Object(h.jsx)("td",{children:new Date(e.item.date).toLocaleDateString()})]})}r(47);var A=Object(j.g)((function(e){var t=Object(c.useState)([]),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(e.match.params.id),o=Object(F.a)(i,2),l=o[0],d=o[1],j=Object(c.useRef)(l);return Object(c.useEffect)((function(){!function(e){fetch("http://localhost:8085/t-shop/order?id=".concat(e)).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.order),console.log(e)})).catch((function(e){return console.log("err",e)}))}(l)}),[l]),Object(c.useEffect)((function(){d(j.current=e.match.params.id)}),[e.match.params.id]),Object(h.jsxs)(h.Fragment,{children:[n.length?Object(h.jsx)("h3",{children:"Order details:"}):null,n.map((function(e){return Object(h.jsx)("div",{className:"order__details",children:Object(h.jsxs)("p",{children:["Name: ",e.name,"; Color: ",e.color,"; Material: ",e.material,"; Size: ",e.size,"; Count: ",e.count]})},e.id)}))]})}));r(48);function D(e){var t=Object(c.useState)([]),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(localStorage.getItem("userId")),o=Object(F.a)(i,2),l=o[0],d=o[1],b=Object(c.useRef)(l);return Object(c.useEffect)((function(){fetch("http://localhost:8085/t-shop/orders?id=".concat(l)).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.orders)})).catch((function(e){return console.log("err",e)}))}),[l]),Object(c.useEffect)((function(){d(b.current=localStorage.getItem("userId"))}),[l]),Object(h.jsx)(u.a,{children:Object(h.jsxs)("div",{className:"orders-wrapper",children:[0===n.length?Object(h.jsx)("p",{children:"You have no orders yet!"}):Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{}),Object(h.jsx)("th",{children:"Status"}),Object(h.jsx)("th",{children:"Payment"}),Object(h.jsx)("th",{children:"Shipping"}),Object(h.jsx)("th",{children:"Price(UAH)"}),Object(h.jsx)("th",{children:"Date"})]})}),Object(h.jsx)("tbody",{children:n.map((function(e,t){return Object(h.jsx)(H,{idx:t+1,item:e},e.id)}))})]}),Object(h.jsx)("div",{children:Object(h.jsx)(j.b,{path:"/user/order/:id",children:Object(h.jsx)(A,{})})})]})})}r(49);function P(e){var t=Object(c.useState)([]),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(localStorage.getItem("email")),o=Object(F.a)(i,2),l=o[0],d=o[1],j=Object(c.useRef)(l);return Object(c.useEffect)((function(){fetch("http://localhost:8085/t-shop/user?email=".concat(l)).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.data[0])})).catch((function(e){return console.log("err",e)}))}),[l]),Object(c.useEffect)((function(){d(j.current=localStorage.getItem("email"))}),[l]),Object(h.jsxs)("main",{className:"userpage-wrapper",children:[Object(h.jsx)("button",{className:"logout-link",onClick:e.onLogout,children:"Logout"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Personal Info:"}),Object(h.jsxs)("p",{children:["Name: ",n.name," ",n.surname]}),Object(h.jsxs)("p",{children:["Email: ",n.email]}),Object(h.jsxs)("p",{children:["Address: ",n.country,", ",n.city,", ",n.address]}),Object(h.jsxs)("p",{children:["Registration date:"," ",new Date(n.registration_date).toLocaleDateString()]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Your Orders:"}),Object(h.jsx)(D,{})]})]})}r(50);var R=function(e){var t=Object(c.useState)([]),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(localStorage.getItem("userId")),o=Object(F.a)(i,2),l=o[0],d=o[1],j=Object(c.useRef)(l);return Object(c.useEffect)((function(){fetch("http://localhost:8085/t-shop/user/cart?id=".concat(l)).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.cart[0])})).catch((function(e){return console.log("err",e)}))}),[l]),Object(c.useEffect)((function(){d(j.current=localStorage.getItem("userId"))}),[l]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:"cart__header",children:"Cart"}),0!==n.length?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("table",{className:"cart",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Color"}),Object(h.jsx)("th",{children:"Size"}),Object(h.jsx)("th",{children:"Count"}),Object(h.jsx)("th",{children:"Price(UAH)"}),Object(h.jsx)("th",{children:"Total price(UAH)"})]})}),Object(h.jsxs)("tbody",{children:[n.map((function(e){return Object(h.jsxs)("tr",{className:"cart-item",children:[Object(h.jsxs)("td",{children:[e.name," (",e.type,")"]}),Object(h.jsxs)("td",{children:[" ",e.color]}),Object(h.jsx)("td",{children:e.size}),Object(h.jsxs)("td",{children:[" ",e.count]}),Object(h.jsxs)("td",{children:[e.price," "]}),Object(h.jsxs)("td",{children:[e.price*e.count," "]})]},e.id)})),Object(h.jsxs)("tr",{className:"cart__total",children:[Object(h.jsx)("td",{children:"Total price"}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{children:n.reduce((function(e,t){return e+t.count*t.price}),0)})]})]})]}),Object(h.jsx)(u.b,{to:"/checkout",className:"btn--order",children:"Order"})]}):Object(h.jsx)("p",{className:"cart__info",children:"Your cart is empty"})]})};r(51);var B=Object(j.g)((function(e){var t=Object(c.useState)([]),r=Object(F.a)(t,2),n=r[0],a=r[1],s=Object(c.useRef)(n),i=Object(c.useState)(localStorage.getItem("userId")),o=Object(F.a)(i,2),l=o[0],d=o[1],j=Object(c.useRef)(l);function u(){return n.reduce((function(e,t){return e+t.count*t.price}),0)}Object(c.useEffect)((function(){fetch("http://localhost:8085/t-shop/user/cart?id=".concat(l)).then((function(e){if(200!==e.status)throw new Error("Failed to fetch");return e.json()})).then((function(e){a(s.current=e.cart[0])})).catch((function(e){return console.log("err",e)}))}),[l]),Object(c.useEffect)((function(){d(j.current=localStorage.getItem("userId"))}),[l]);var b=u();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{className:"checkout__header",children:"Checkout page"}),Object(h.jsxs)("div",{className:"checkout-wrapper",children:[Object(h.jsxs)("form",{children:[Object(h.jsx)("h4",{children:"Payment:"}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{className:"payment__input",id:"cash",type:"radio",value:"cash",name:"payment",defaultChecked:!0}),Object(h.jsx)("label",{htmlFor:"cash",children:"Cash"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{className:"payment__input",id:"mastercard",type:"radio",value:"mastercard",name:"payment",disabled:!0}),Object(h.jsx)("label",{htmlFor:"mastercard",children:"Mastercard"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{className:"payment__input",id:"privatbank",type:"radio",value:"privatbank",name:"payment",disabled:!0}),Object(h.jsx)("label",{htmlFor:"privatbank",children:"Privatbank"})]}),Object(h.jsx)("h4",{children:"Shipping:"}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{className:"payment__input",id:"self",type:"radio",value:"cash",name:"shipping",defaultChecked:!0}),Object(h.jsx)("label",{htmlFor:"self",children:"Self"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{className:"payment__input",id:"mastercard",type:"radio",value:"novaposhta",name:"shipping",disabled:!0}),Object(h.jsx)("label",{htmlFor:"mastercard",children:"Nova Poshta +44.00 Uah"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{className:"payment__input",id:"privatbank",type:"radio",value:"ukrposhta",name:"shipping",disabled:!0}),Object(h.jsx)("label",{htmlFor:"privatbank",children:"UkrPoshta +60.00 UaH"})]})]}),Object(h.jsxs)("table",{className:"cart",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Color"}),Object(h.jsx)("th",{children:"Size"}),Object(h.jsx)("th",{children:"Count"}),Object(h.jsx)("th",{children:"Price(UAH)"}),Object(h.jsx)("th",{children:"Total price(UAH)"})]})}),Object(h.jsxs)("tbody",{children:[n.map((function(e){return Object(h.jsxs)("tr",{className:"cart-item",children:[Object(h.jsxs)("td",{children:[e.name," (",e.type,")"]}),Object(h.jsxs)("td",{children:[" ",e.color]}),Object(h.jsx)("td",{children:e.size}),Object(h.jsxs)("td",{children:[" ",e.count]}),Object(h.jsxs)("td",{children:[e.price," "]}),Object(h.jsxs)("td",{children:[e.price*e.count," "]})]},e.id)})),Object(h.jsxs)("tr",{className:"cart__total",children:[Object(h.jsx)("td",{children:"Total price"}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{}),Object(h.jsx)("td",{children:u()})]})]})]})]}),Object(h.jsx)("button",{onClick:function(){fetch("http://localhost:8085/t-shop/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l,totalPrice:b,cart:n})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){console.log("err",e)})),e.history.push("/user")},className:"btn--checkout",children:"Checkout"})]})})),T=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(i.a)(this,r);for(var c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={isAuth:!1,token:null,userId:null,error:null,message:""},e.setAutologout=function(t){setTimeout((function(){e.logoutHandler()}),t)},e.signUpHandler=function(t,r){t.preventDefault(),fetch("http://localhost:8085/t-shop/signup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,surname:r.surname,email:r.email,password:r.password,country:r.country,city:r.city,address:r.address})}).then((function(e){if(422===e.status)throw new Error("Validation failed!");if(200!==e.status&&201!==e.status)throw new Error("Creating user failed!");return e.json()})).then((function(t){console.log(t),e.setState({isAuth:!1,message:t.message})})).catch((function(t){e.setState({isAuth:!1,error:t})}))},e.logInHandler=function(t,r){t.preventDefault(),fetch("http://localhost:8085/t-shop/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email,password:r.password})}).then((function(e){if(422===e.status)throw new Error("Validation failed!");if(200!==e.status&&201!==e.status)throw new Error("Authentication failed!");return e.json()})).then((function(t){e.setState({isAuth:!0,userId:t.userId,token:t.token,error:null}),localStorage.setItem("token",t.token),localStorage.setItem("userId",t.userId),localStorage.setItem("email",t.email);var r=36e5,c=new Date((new Date).getTime()+r);localStorage.setItem("expirationDate",c.toISOString()),e.setAutologout(r)})).catch((function(t){e.setState({isAuth:!1,error:t})}))},e.logoutHandler=function(){e.setState({isAuth:!1,token:null}),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("email")},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expirationDate"),r=new Date(t)<=new Date;if(e&&t)if(r)this.logoutHandler();else{var c=localStorage.getItem("userId"),n=new Date(t).getTime()-(new Date).getTime();this.setState({isAuth:!0,token:e,userId:c}),this.setAutologout(n)}}},{key:"render",value:function(){var e=Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/",children:Object(h.jsx)(m,{})}),Object(h.jsx)(j.b,{path:"/about",children:Object(h.jsx)(p,{})}),Object(h.jsx)(j.b,{path:"/login",children:Object(h.jsx)(y,{onLogin:this.logInHandler})}),Object(h.jsx)(j.b,{path:"/register",children:Object(h.jsx)(w,{onRegister:this.signUpHandler,state:this.state})}),Object(h.jsx)(j.b,{path:"/products/:category",children:Object(h.jsx)(I,{})}),Object(h.jsx)(j.b,{path:"/products",children:Object(h.jsx)(I,{})}),Object(h.jsx)(j.b,{path:"/product/:id",children:Object(h.jsx)(E,{})}),Object(h.jsx)(j.a,{to:"/login"})]});return this.state.isAuth&&(e=Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/",children:Object(h.jsx)(m,{})}),Object(h.jsx)(j.b,{path:"/about",children:Object(h.jsx)(p,{})}),Object(h.jsx)(j.b,{path:"/cart",children:Object(h.jsx)(R,{})}),Object(h.jsx)(j.b,{path:"/user",children:Object(h.jsx)(P,{onLogout:this.logoutHandler})}),Object(h.jsx)(j.b,{path:"/products/:category",children:Object(h.jsx)(I,{})}),Object(h.jsx)(j.b,{path:"/products",children:Object(h.jsx)(I,{})}),Object(h.jsx)(j.b,{path:"/product/:id",children:Object(h.jsx)(E,{})}),Object(h.jsx)(j.b,{path:"/checkout",children:Object(h.jsx)(B,{})}),Object(h.jsx)(j.a,{to:"/"})]})),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(u.a,{children:[Object(h.jsx)(b,{isAuth:this.state.isAuth}),Object(h.jsx)("div",{className:"app-wrapper",children:e})]})})}}]),r}(c.Component),U=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,53)).then((function(t){var r=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),c(e),n(e),a(e),s(e)}))};s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(T,{})}),document.getElementById("root")),U()}},[[52,1,2]]]);
//# sourceMappingURL=main.5197d58e.chunk.js.map